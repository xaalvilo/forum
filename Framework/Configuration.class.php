<?phpnamespace Framework;/** * @author Frdric Tarreau *  * Classe fille de la classe AppComponent dont le rle est la gestion de la configuration du site, permettant d'externaliser la configuration du site en dehors du code source * elle charge le fichier de configuration dev.ini ou prod.ini *  * 11 sept. 2014 - file_name * */class Configuration extends ApplicationComponent{    /**    * cette classe encapsule un tableau associatif cls/valeurs (attribut $parametres) stockant les valeurs des paramètres de configuration. ce tableau est statique (un seul exemplaire par classe)    * ce qui permet de l'utiliser sans instancier d'objet Configuration    */    private static $parametres ;    /**    * Mthode statique publique permettant de rechercher la valeur d'un paramtre  partir de son nom.    * si le paramtre en question est trouvé dans le tableau associatif, la mthode renvoie la valeur du parametre de configuration     * sinon une valeur par dfaut est renvoye    *    * @param string $nom Nom du paramtre    * @param string $valeurParDefaut Valeur à renvoyer par dfaut    * @return string Valeur du paramtre    */    public static function get($nom, $valeurParDefaut = null)    {        if(isset(self::getParametres()[$nom]))        {            $valeur = self::getParametres()[$nom];        }        else         {            $valeur = $valeurParDefaut;        }        return $valeur;    }    /**    * Mthode statique prive getParametres() effectue le chargement tardif du fichier contenant les paramètres de configuration. Afin de faire figurer sur     * un mme serveur une configuration de dveloppement  et une configuration de production, 2 fichiers sont recherchés dans le répertoire Config du site : dev.ini et prod.ini.     *     * @return array $_parametres tableau associatif des parametres de configuration    * @throws Exception Si aucun fichier de configuration n'est trouvé    */    private static function getParametres()    {        //si le fichier n'a pas djà t charg         if (self::$parametres == null)        {            //prendre le fichier de configuration de développement            $cheminFichier = "Config/dev.ini";                       // s'il n'existe pas , prendre le fichier de configuration de production            if (!file_exists($cheminFichier))            {                $cheminFichier = "Config/prod.ini ";            }                        // si ce dernier n'existe pas non plus, envoyer une erreur             if (!file_exists($cheminFichier))            {                throw new \Exception("Aucun fichier de configuration trouv");            }                        // sinon instancier et renvoyer un tableau associatif attribué à l'attribut $_parametres grâce à la fonction parse_ini°file() qui analyse un fichier de configuration             // et retourne la configuration sous forme de tableau associatif            else            {                self::$parametres = parse_ini_file($cheminFichier);            }        }                // si le fichier de configuration a dj t charg, le renvoyer        return self::$parametres;    }}                            